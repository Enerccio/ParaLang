using IO;
using Collections.List;

module HelloWorldModule {

	class GaspingException > BaseException {
		
		get_message(){
			return "Oh! " + parent.get_message() + "!!!";
		}
	
	} 

	class Test {
		var a;
				
		restricted __apply(){
			a = 0;
			run();
		}
		
		restricted run(){
			++a;
			IO.out.println(a);
			if (a < 1000)
				run();
			throw new GaspingException("Something went wrong");
		}
		
		__eq(other){
			IO.out.println("Test!");
			return parent.__eq(other);
		}
	}
	
	var test;
	
	restricted run(){
		try {
			try {
				new Test()();
			} catch (BaseException a){
				throw a;
			} finally {
				IO.out.println("Finally done this!");
			}
		} finally {
			IO.out.println("Outer layer finally");
		} 
	}
};